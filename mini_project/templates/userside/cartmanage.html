<!DOCTYPE html>
{% load static %}
<html lang="zxx" class="no-js">

<head>
	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Favicon-->
	<link rel="shortcut icon" href="{% static 'img/fav.png' %}">
	<!-- Author Meta -->
	<meta name="author" content="CodePixar">
	<!-- Meta Description -->
	<meta name="description" content="">
	<!-- Meta Keyword -->
	<meta name="keywords" content="">
	<!-- meta character set -->
	<meta charset="UTF-8">
	<!-- Site Title -->
	<title>AGILE AVENGERS </title>
	<!---
		CSS
		============================================= -->
	<link rel="stylesheet" href="{% static 'css/linearicons.css' %}">
	<link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
	<link rel="stylesheet" href="{% static 'css/themify-icons.css' %}">
	<link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
	<link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}">
	<link rel="stylesheet" href="{% static 'css/nice-select.css' %}">
	<link rel="stylesheet" href="{% static 'css/nouislider.min.css' %}">
	<link rel="stylesheet" href="{% static 'css/ion.rangeSlider.css' %}" />
	<link rel="stylesheet" href="{% static 'css/ion.rangeSlider.skinFlat.css' %}" />
	<link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
	<link rel="stylesheet" href="{% static 'css/main.css' %}">
	<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">	
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
</head>

<body>

	<!-- Start Header Area -->
	<header class="header_area sticky-header">
		<div class="main_menu">
			<nav class="navbar navbar-expand-lg navbar-light main_box">
				<div class="container">
					<!-- Brand and toggle get grouped for better mobile display -->
					<a class="navbar-brand logo_h" href="{% url 'home' %}"><img
							src="{% static 'img/mini_project_logo.png' %}" style="height:5rem; width: 7rem; "
							alt=""></a>
					<!-- <button class="navbar-toggler" type="button" data-toggle="collapse"
						data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
						aria-expanded="false" aria-label="Toggle navigation">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button> -->
					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse offset" id="navbarSupportedContent">
						<ul class="nav navbar-nav menu_nav ml-auto">
							<li class="nav-item "><a class="nav-link" href="{% url 'home' %}">Home</a>
							</li>
							<li class="nav-item "><a class="nav-link" href="{% url 'Shop' %}">Shop</a>
							</li>
							<li class="nav-item"><a class="nav-link" href="{% url 'userprofile' %}">Profile</a></li>

							{% if request.user.is_authenticated %}
								<li class="nav-item submenu dropdown">
									<a href="{% url 'logout' %}" class="nav-link dropdown-toggle">Logout</a>
								</li>
							{% else %}
								<li class="nav-item submenu dropdown">
									<a href="{% url 'loginn' %}" class="nav-link dropdown-toggle">Login</a>
								</li>
							{% endif %}

						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li class="nav-item"><a href="{% url 'cart' %}" class="cart"><span class="ti-bag"></span></a></li>
							<li class="nav-item"><a href="{% url 'wallet_view' %}" class="wallet"><span class="ti-wallet"></span></a></li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li class="nav-item"><a href="{% url 'wishlist' %}" class="wishlist"><span class="lnr lnr-heart"></span></a></li>
							<li class="nav-item">
								<button class="search"><span class="lnr lnr-magnifier" id="search"></span></button>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
		<div class="search_input" id="search_input_box">
			<div class="container">
				<form class="d-flex justify-content-between" method="get" action="{% url 'search_products' %}">
					<input type="text" name="q" class="form-control" id="search_input" placeholder="Search Here">
					<button type="submit" class="btn"></button>
					<span class="lnr lnr-cross" id="close_search" title="Close Search"></span>
				</form>
			</div>
		</div>
	</header>
    
    <section class="banner-area organic-breadcrumb">
		<div class="container">
			<div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
				<div class="col-first">
					<h1>Cart Details </h1>
					
				</div>
			</div>
		</div>
	</section>
    <!-- End Banner Area -->

    <!--================Cart Area =================-->
	{% if messages %}
		<div class="messages">
			{% for message in messages %}
			<div class="{% if message.tags %}alert alert-{{ message.tags }}{% endif %} {% if message.tags == 'error' %}text-danger{% endif %}">
				{{ message }}
			</div>
			{% endfor %}
		</div>
	{% endif %}
    <section class="cart_area">
        <div class="container">
            <div class="cart_inner">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Product</th>
								<th scope="col">Name</th>
                                <th scope="col">Quantity</th>
                                <th scope="col">Price</th>
                                <th scope="col">Remove</th>
                                <!-- <th scope="col">Total</th> -->
                            </tr>
                        </thead>
                        <tbody>
							{% for item in items %}
							<tr>
								<td>
									<div class="media">
										<div class="d-flex">
											<img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" style="height: 8rem;" width="150rem">
										</div>
										
									</div>
								</td>
								<td>
									<div class="media-body">
										<p>{{ item.product.Name }}  {% if item.product.category.Name == 'Shoes' %}-{{ item.product.size }} inch{% endif %} </p>
									</div>
								</td>
								<td>
									<div class="product_count">
										<!-- <form method="get" action="#"> -->
											<input type="number" onclick="updateQuantity(this, '{{item.product.id }}')" name="quantity" min="1" max="{{item.product.quantity}}" value="{{ item.quantity }}" placeholder="{{ item.quantity }}" >
											<p style="color: red;" class="limitMessage invisible">Quantity Limit exceeded</p>
											<!-- <button type="submit">Update</button> -->
										<!-- </form> -->
									</div>
								</td>
								<td>
									<h5>Rs.{{ item.product.price }}</h5>
								</td>
								<td>
									<a href="{% url 'remove_from_cart' item.product.id %}" onclick="removeProduct(this);">Remove</a>
								</td>
							</tr>
							{% endfor %}
                            
                            <!-- <tr class="bottom_button">
                                <td>
                                    <a class="gray_btn" href="#">Update Cart</a>
                                </td>
                                <td>

                                </td>
                                <td>

                                </td>
                                <td>
                                    <div class="cupon_text d-flex align-items-center">
                                        <input type="text" placeholder="Coupon Code">
                                        <a class="primary-btn" href="#">Apply</a>
                                        <a class="gray_btn" href="#">Close Coupon</a> 
                                    </div>
                                </td>
                            </tr> -->
                            <tr>
                                <td>

                                </td>
                                <td>

                                </td>
                                <!-- <td>
                                    <h5>Subtotal</h5>
                                </td> -->
                                <td>
                                    <h5>Subtotal:   Rs.{{ subtotal }}</h5>
                                </td>
                            </tr>
                            
                            <tr class="out_button_area">
                                <td>

                                </td>
                                <td>

                                </td>
                                <td>

                                </td>
                                <td>
                                    <div class="checkout_btn_inner d-flex align-items-center">
                                        <!-- <a class="gray_btn" href="#">Continue Shopping</a> -->
                                        <a class="primary-btn" href="{% url 'checkout' %}">Proceed to Checkout</a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>
    <!--================End Cart Area =================-->

    <!-- start footer Area -->
    <footer class="footer-area section_gap">
		<div class="container">
			<div class="row">
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>About Us</h6>
						<p>
							The beauty of the game is strength and technique and when you shorten the game,
							technique goes for a toss and the quality of badminton will surely go down in this system.
						</p>
					</div>
				</div>
				<div class="col-lg-4  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>Newsletter</h6>
						<p>Stay update with our latest</p>

					</div>
				</div>
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget mail-chimp">
						<h6 class="mb-20">Contact Us</h6>
						<p>Agileavengers trivandrum
							mobno. 7521454639
						</p>
					</div>
				</div>
				<div class="col-lg-2 col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>Follow Us</h6>
						<p>Let us be social</p>
						<div class="footer-social d-flex align-items-center">
							<a href="#"><i class="fa fa-facebook"></i></a>
							<a href="#"><i class="fa fa-twitter"></i></a>
							<a href="#"><i class="fa fa-dribbble"></i></a>
							<a href="#"><i class="fa fa-behance"></i></a>
						</div>
					</div>
				</div>
			</div>
			<div class="footer-bottom d-flex justify-content-center align-items-center flex-wrap">
				<p class="footer-text m-0">
					Copyright &copy;
					<script>document.write(new Date().getFullYear());</script> All rights reserved | AGILE AVENGERS

				</p>
			</div>
		</div>
	</footer>
    <!-- End footer Area -->

    <script src="{% static 'js/vendor/jquery-2.2.4.min.js' %}"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
	 crossorigin="anonymous"></script>
	<script src="{% static 'js/vendor/bootstrap.min.js' %}"></script>
	<script src="{% static 'js/jquery.ajaxchimp.min.js' %}"></script>
	<script src="{% static 'js/jquery.nice-select.min.js' %}"></script>
	<script src="{% static 'js/jquery.sticky.js' %}"></script>
    <script src="{% static 'js/nouislider.min.js' %}"></script>
	<script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
	<script src="{% static 'js/owl.carousel.min.js' %}"></script>
	<!--gmaps Js-->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
	<script src="{% static 'js/gmaps.min.js' %}"></script>
	<script src="{% static 'js/main.js' %}"></script>

    <script>
        function removeProduct(button) {
            var row = button.closest("tr");
            row.remove(); 
        }
		function updateQuantity(elem , id){

			console.log(elem,id)
			let parent = elem.parentElement
			let limitMessage = parent.querySelector('.limitMessage')
			let quantity = Number(elem.value)
			fetch(`/update_quantity/${id}/${quantity}`)
			.then(res => res.json())
			.then((res)=>{
				if(res.success){
					if(quantity === res.quantity){
						limitMessage.classList.remove('invisible')	
						
					}else{
						limitMessage.classList.add('invisible')
						
					}
				}else{
					throw 'so error occured'
				}
			}).catch((err)=> {
				console.log('b4 error')
				console.log(err)})
		}
    </script>

</body>

</html>
